{"ast":null,"code":"var _jsxFileName = \"/Users/xinyutang/Dropbox/My Mac (MacBook-Pro.hsd1.ma.comcast.net)/Documents/react/xinyu-bakingblog/src/containers/Hero/Hero.jsx\";\nimport React, { Component } from \"react\";\nimport Card from \"../../components/common/card\";\nimport Classes from \"./Hero.module.css\";\nimport Logo from \"../../components/common/logo\";\nimport Nav from \"../../components/common/nav\";\nimport Search from \"../../components/common/search\";\nimport { withRouter, Route, Redirect } from \"react-router-dom\";\nimport cakeData from \"../../data/cake.json\";\nimport Ingredient from \"../Ingredient/Ingredient\";\n\nclass Hero extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      posts: \"\",\n      post: \"\",\n      value: \"\",\n      showDropdown: false,\n      link: [{\n        name: \"Home\",\n        path: \"/\"\n      }, {\n        name: \"Posts\",\n        path: \"/cake\"\n      }, {\n        name: \"ByIngredient\",\n        path: `/cake`\n      }],\n      filteredLink: []\n    };\n\n    this.getPost = (category, id) => {\n      const posts = this.state.posts;\n      const postId = id;\n      const cat = category;\n      let post = null;\n      const found = posts.find(post => post.id === postId && post.category === cat);\n\n      if (found) {\n        post = {\n          category: found.category,\n          title: found.title,\n          by: found.by,\n          imageLocation: found.imageLocation,\n          content: found.content\n        };\n      } else {\n        post = this.state.post;\n      }\n\n      this.setState({\n        post\n      });\n    };\n\n    this.filterLink = () => {\n      const ingredient = this.state.value;\n      const posts = [...this.state.posts];\n      const titles = posts.map(post => post.title);\n      const p = Array.from(ingredient).reduce((a, v, i) => `${a}[^${ingredient.toLowerCase().substr(i)}]*?${v}`, \"\");\n      const re = RegExp(p);\n      const filteredTitle = titles.filter(item => item.toLowerCase().match(re));\n      let filteredPosts = filteredTitle.map(title => {\n        return posts.filter(item => item.title === title);\n      });\n      filteredPosts = [].concat.apply([], filteredPosts);\n      const filteredLink = filteredPosts.map(post => {\n        return {\n          name: post.title,\n          path: `/cake/${post.id}`,\n          imageLocation: post.imageLocation,\n          type: \"search\"\n        };\n      });\n      this.setState({\n        filteredLink\n      });\n      this.setState({\n        value: \"\"\n      });\n      this.props.history.push(\"/ingredient\");\n    };\n\n    this.selectIngredient = ingredient => {\n      this.setState({\n        ingredient\n      });\n    };\n\n    this.changeDropdown = () => {\n      this.setState(preState => {\n        return {\n          showDropdown: !preState.showDropdown\n        };\n      });\n    };\n\n    this.removeDropdown = () => {\n      this.setState(preState => {\n        return {\n          showDropdown: false\n        };\n      });\n    };\n\n    this.searchMethod = e => {\n      const value = e.target.value.toLowerCase();\n      this.setState({\n        value\n      });\n    };\n\n    this.submitForm = e => {\n      e.preventDefault();\n      console.log(\"submitted\");\n\n      if (this.state.value === \"\") {\n        return;\n      }\n\n      this.filterLink();\n    };\n  }\n\n  componentWillMount() {\n    const posts = cakeData.data;\n    this.setState({\n      posts\n    });\n  }\n\n  render() {\n    console.log(this.props.location);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: Classes.Hero,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      style: Classes.Card,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Logo, {\n      style: Classes.Logo,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Nav, {\n      link: this.state.link,\n      nav_link_style: Classes.Nav_link,\n      nav_style: Classes.Nav,\n      showDropdown: this.state.showDropdown,\n      changeDropdown: this.changeDropdown,\n      removeDropdown: this.removeDropdown,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Search, {\n      style: Classes.Search,\n      inputStyle: Classes.SearchInput,\n      value: this.state.value,\n      onChange: this.searchMethod,\n      onSubmit: this.submitForm,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/ingredient\",\n      render: () => /*#__PURE__*/React.createElement(Ingredient, {\n        link: this.state.filteredLink,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 27\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 11\n      }\n    })));\n  }\n\n}\n\nexport default withRouter(Hero);","map":{"version":3,"sources":["/Users/xinyutang/Dropbox/My Mac (MacBook-Pro.hsd1.ma.comcast.net)/Documents/react/xinyu-bakingblog/src/containers/Hero/Hero.jsx"],"names":["React","Component","Card","Classes","Logo","Nav","Search","withRouter","Route","Redirect","cakeData","Ingredient","Hero","state","posts","post","value","showDropdown","link","name","path","filteredLink","getPost","category","id","postId","cat","found","find","title","by","imageLocation","content","setState","filterLink","ingredient","titles","map","p","Array","from","reduce","a","v","i","toLowerCase","substr","re","RegExp","filteredTitle","filter","item","match","filteredPosts","concat","apply","type","props","history","push","selectIngredient","changeDropdown","preState","removeDropdown","searchMethod","e","target","submitForm","preventDefault","console","log","componentWillMount","data","render","location","Nav_link","SearchInput"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Card from \"../../components/common/card\";\nimport Classes from \"./Hero.module.css\";\nimport Logo from \"../../components/common/logo\";\nimport Nav from \"../../components/common/nav\";\nimport Search from \"../../components/common/search\";\nimport { withRouter, Route, Redirect } from \"react-router-dom\";\n\nimport cakeData from \"../../data/cake.json\";\nimport Ingredient from \"../Ingredient/Ingredient\";\n\nclass Hero extends Component {\n  state = {\n    posts: \"\",\n    post: \"\",\n    value: \"\",\n    showDropdown: false,\n    link: [\n      { name: \"Home\", path: \"/\" },\n      { name: \"Posts\", path: \"/cake\" },\n      { name: \"ByIngredient\", path: `/cake` },\n    ],\n    filteredLink: [],\n  };\n\n  componentWillMount() {\n    const posts = cakeData.data;\n    this.setState({ posts });\n  }\n\n  getPost = (category, id) => {\n    const posts = this.state.posts;\n    const postId = id;\n    const cat = category;\n\n    let post = null;\n    const found = posts.find(\n      (post) => post.id === postId && post.category === cat\n    );\n    if (found) {\n      post = {\n        category: found.category,\n        title: found.title,\n        by: found.by,\n        imageLocation: found.imageLocation,\n        content: found.content,\n      };\n    } else {\n      post = this.state.post;\n    }\n\n    this.setState({ post });\n  };\n\n  filterLink = () => {\n    const ingredient = this.state.value;\n    const posts = [...this.state.posts];\n    const titles = posts.map((post) => post.title);\n    const p = Array.from(ingredient).reduce(\n      (a, v, i) => `${a}[^${ingredient.toLowerCase().substr(i)}]*?${v}`,\n      \"\"\n    );\n    const re = RegExp(p);\n    const filteredTitle = titles.filter((item) => item.toLowerCase().match(re));\n    let filteredPosts = filteredTitle.map((title) => {\n      return posts.filter((item) => item.title === title);\n    });\n    filteredPosts = [].concat.apply([], filteredPosts);\n\n    const filteredLink = filteredPosts.map((post) => {\n      return {\n        name: post.title,\n        path: `/cake/${post.id}`,\n        imageLocation: post.imageLocation,\n        type: \"search\",\n      };\n    });\n\n    this.setState({ filteredLink });\n    this.setState({ value: \"\" });\n    this.props.history.push(\"/ingredient\");\n  };\n\n  selectIngredient = (ingredient) => {\n    this.setState({ ingredient });\n  };\n\n  changeDropdown = () => {\n    this.setState((preState) => {\n      return { showDropdown: !preState.showDropdown };\n    });\n  };\n  removeDropdown = () => {\n    this.setState((preState) => {\n      return { showDropdown: false };\n    });\n  };\n\n  searchMethod = (e) => {\n    const value = e.target.value.toLowerCase();\n    this.setState({ value });\n  };\n\n  submitForm = (e) => {\n    e.preventDefault();\n    console.log(\"submitted\");\n    if (this.state.value === \"\") {\n      return;\n    }\n    this.filterLink();\n  };\n\n  render() {\n    console.log(this.props.location);\n    return (\n      <div style={Classes.Hero}>\n        <Card style={Classes.Card}>\n          <Logo style={Classes.Logo} />\n          <Nav\n            link={this.state.link}\n            nav_link_style={Classes.Nav_link}\n            nav_style={Classes.Nav}\n            showDropdown={this.state.showDropdown}\n            changeDropdown={this.changeDropdown}\n            removeDropdown={this.removeDropdown}\n          />\n          <Search\n            style={Classes.Search}\n            inputStyle={Classes.SearchInput}\n            value={this.state.value}\n            onChange={this.searchMethod}\n            onSubmit={this.submitForm}\n          />\n        </Card>\n\n        <div>\n          <Route\n            exact\n            path=\"/ingredient\"\n            render={() => <Ingredient link={this.state.filteredLink} />}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(Hero);\n"]},"metadata":{},"sourceType":"module"}