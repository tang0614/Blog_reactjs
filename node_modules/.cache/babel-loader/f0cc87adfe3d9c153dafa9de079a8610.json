{"ast":null,"code":"import _toConsumableArray from\"/Users/xinyutang/Dropbox/My Mac (MacBook-Pro.hsd1.ma.comcast.net)/Documents/react/xinyu-bakingblog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/xinyutang/Dropbox/My Mac (MacBook-Pro.hsd1.ma.comcast.net)/Documents/react/xinyu-bakingblog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/xinyutang/Dropbox/My Mac (MacBook-Pro.hsd1.ma.comcast.net)/Documents/react/xinyu-bakingblog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/xinyutang/Dropbox/My Mac (MacBook-Pro.hsd1.ma.comcast.net)/Documents/react/xinyu-bakingblog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/xinyutang/Dropbox/My Mac (MacBook-Pro.hsd1.ma.comcast.net)/Documents/react/xinyu-bakingblog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import Card from\"../../components/common/card\";import Classes from\"./Hero.module.css\";import Logo from\"../../components/common/logo\";import Nav from\"../../components/common/nav\";import Search from\"../../components/common/search\";import{withRouter,Route,Redirect}from\"react-router-dom\";import AsyncCompo from\"../../hoc/asyncCompo\";import cakeData from\"../../data/cake.json\";var AsyncIngredient=AsyncCompo(function(){return import(\"../Ingredient/Ingredient\");});var Hero=/*#__PURE__*/function(_Component){_inherits(Hero,_Component);var _super=_createSuper(Hero);function Hero(){var _this;_classCallCheck(this,Hero);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={posts:\"\",post:\"\",value:\"\",showDropdown:false,link:[{name:\"Home\",path:\"/\"},{name:\"Posts\",path:\"/cake\"},{name:\"ByIngredient\",path:\"/cake\"}],filteredLink:[]};_this.getPost=function(category,id){var posts=_this.state.posts;var postId=id;var cat=category;var post=null;var found=posts.find(function(post){return post.id===postId&&post.category===cat;});if(found){post={category:found.category,title:found.title,by:found.by,imageLocation:found.imageLocation,content:found.content};}else{post=_this.state.post;}_this.setState({post:post});};_this.filterLink=function(){var ingredient=_this.state.value;var posts=_toConsumableArray(_this.state.posts);var titles=posts.map(function(post){return post.title;});var p=Array.from(ingredient).reduce(function(a,v,i){return\"\".concat(a,\"[^\").concat(ingredient.toLowerCase().substr(i),\"]*?\").concat(v);},\"\");var re=RegExp(p);var filteredTitle=titles.filter(function(item){return item.toLowerCase().match(re);});var filteredPosts=filteredTitle.map(function(title){return posts.filter(function(item){return item.title===title;});});filteredPosts=[].concat.apply([],filteredPosts);var filteredLink=filteredPosts.map(function(post){return{name:post.title,path:\"/cake/\".concat(post.id),imageLocation:post.imageLocation,type:\"search\"};});_this.setState({filteredLink:filteredLink});_this.setState({value:\"\"});_this.props.history.push(\"/ingredient\");};_this.selectIngredient=function(ingredient){_this.setState({ingredient:ingredient});};_this.changeDropdown=function(){_this.setState(function(preState){return{showDropdown:!preState.showDropdown};});};_this.removeDropdown=function(){_this.setState(function(preState){return{showDropdown:false};});};_this.searchMethod=function(e){var value=e.target.value.toLowerCase();_this.setState({value:value});};_this.submitForm=function(e){e.preventDefault();console.log(\"submitted\");if(_this.state.value===\"\"){return;}_this.filterLink();};return _this;}_createClass(Hero,[{key:\"componentWillMount\",value:function componentWillMount(){var posts=cakeData.data;this.setState({posts:posts});}},{key:\"render\",value:function render(){var _this2=this;console.log(this.props.location);return/*#__PURE__*/React.createElement(\"div\",{style:Classes.Hero},/*#__PURE__*/React.createElement(Card,{style:Classes.Card},/*#__PURE__*/React.createElement(Logo,{style:Classes.Logo}),/*#__PURE__*/React.createElement(Nav,{link:this.state.link,nav_link_style:Classes.Nav_link,nav_style:Classes.Nav,showDropdown:this.state.showDropdown,changeDropdown:this.changeDropdown,removeDropdown:this.removeDropdown}),/*#__PURE__*/React.createElement(Search,{style:Classes.Search,inputStyle:Classes.SearchInput,value:this.state.value,onChange:this.searchMethod,onSubmit:this.submitForm})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/ingredient\",render:function render(){return/*#__PURE__*/React.createElement(AsyncIngredient,{link:_this2.state.filteredLink});}})));}}]);return Hero;}(Component);export default withRouter(Hero);","map":{"version":3,"sources":["/Users/xinyutang/Dropbox/My Mac (MacBook-Pro.hsd1.ma.comcast.net)/Documents/react/xinyu-bakingblog/src/containers/Hero/Hero.jsx"],"names":["React","Component","Card","Classes","Logo","Nav","Search","withRouter","Route","Redirect","AsyncCompo","cakeData","AsyncIngredient","Hero","state","posts","post","value","showDropdown","link","name","path","filteredLink","getPost","category","id","postId","cat","found","find","title","by","imageLocation","content","setState","filterLink","ingredient","titles","map","p","Array","from","reduce","a","v","i","toLowerCase","substr","re","RegExp","filteredTitle","filter","item","match","filteredPosts","concat","apply","type","props","history","push","selectIngredient","changeDropdown","preState","removeDropdown","searchMethod","e","target","submitForm","preventDefault","console","log","data","location","Nav_link","SearchInput"],"mappings":"qjCAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,IAAP,KAAiB,8BAAjB,CACA,MAAOC,CAAAA,OAAP,KAAoB,mBAApB,CACA,MAAOC,CAAAA,IAAP,KAAiB,8BAAjB,CACA,MAAOC,CAAAA,GAAP,KAAgB,6BAAhB,CACA,MAAOC,CAAAA,MAAP,KAAmB,gCAAnB,CACA,OAASC,UAAT,CAAqBC,KAArB,CAA4BC,QAA5B,KAA4C,kBAA5C,CACA,MAAOC,CAAAA,UAAP,KAAuB,sBAAvB,CACA,MAAOC,CAAAA,QAAP,KAAqB,sBAArB,CAEA,GAAMC,CAAAA,eAAe,CAAGF,UAAU,CAAC,UAAM,CACvC,MAAO,QAAO,0BAAP,CAAP,CACD,CAFiC,CAAlC,C,GAIMG,CAAAA,I,mTACJC,K,CAAQ,CACNC,KAAK,CAAE,EADD,CAENC,IAAI,CAAE,EAFA,CAGNC,KAAK,CAAE,EAHD,CAINC,YAAY,CAAE,KAJR,CAKNC,IAAI,CAAE,CACJ,CAAEC,IAAI,CAAE,MAAR,CAAgBC,IAAI,CAAE,GAAtB,CADI,CAEJ,CAAED,IAAI,CAAE,OAAR,CAAiBC,IAAI,CAAE,OAAvB,CAFI,CAGJ,CAAED,IAAI,CAAE,cAAR,CAAwBC,IAAI,QAA5B,CAHI,CALA,CAUNC,YAAY,CAAE,EAVR,C,OAkBRC,O,CAAU,SAACC,QAAD,CAAWC,EAAX,CAAkB,CAC1B,GAAMV,CAAAA,KAAK,CAAG,MAAKD,KAAL,CAAWC,KAAzB,CACA,GAAMW,CAAAA,MAAM,CAAGD,EAAf,CACA,GAAME,CAAAA,GAAG,CAAGH,QAAZ,CAEA,GAAIR,CAAAA,IAAI,CAAG,IAAX,CACA,GAAMY,CAAAA,KAAK,CAAGb,KAAK,CAACc,IAAN,CACZ,SAACb,IAAD,QAAUA,CAAAA,IAAI,CAACS,EAAL,GAAYC,MAAZ,EAAsBV,IAAI,CAACQ,QAAL,GAAkBG,GAAlD,EADY,CAAd,CAGA,GAAIC,KAAJ,CAAW,CACTZ,IAAI,CAAG,CACLQ,QAAQ,CAAEI,KAAK,CAACJ,QADX,CAELM,KAAK,CAAEF,KAAK,CAACE,KAFR,CAGLC,EAAE,CAAEH,KAAK,CAACG,EAHL,CAILC,aAAa,CAAEJ,KAAK,CAACI,aAJhB,CAKLC,OAAO,CAAEL,KAAK,CAACK,OALV,CAAP,CAOD,CARD,IAQO,CACLjB,IAAI,CAAG,MAAKF,KAAL,CAAWE,IAAlB,CACD,CAED,MAAKkB,QAAL,CAAc,CAAElB,IAAI,CAAJA,IAAF,CAAd,EACD,C,OAEDmB,U,CAAa,UAAM,CACjB,GAAMC,CAAAA,UAAU,CAAG,MAAKtB,KAAL,CAAWG,KAA9B,CACA,GAAMF,CAAAA,KAAK,oBAAO,MAAKD,KAAL,CAAWC,KAAlB,CAAX,CACA,GAAMsB,CAAAA,MAAM,CAAGtB,KAAK,CAACuB,GAAN,CAAU,SAACtB,IAAD,QAAUA,CAAAA,IAAI,CAACc,KAAf,EAAV,CAAf,CACA,GAAMS,CAAAA,CAAC,CAAGC,KAAK,CAACC,IAAN,CAAWL,UAAX,EAAuBM,MAAvB,CACR,SAACC,CAAD,CAAIC,CAAJ,CAAOC,CAAP,kBAAgBF,CAAhB,cAAsBP,UAAU,CAACU,WAAX,GAAyBC,MAAzB,CAAgCF,CAAhC,CAAtB,eAA8DD,CAA9D,GADQ,CAER,EAFQ,CAAV,CAIA,GAAMI,CAAAA,EAAE,CAAGC,MAAM,CAACV,CAAD,CAAjB,CACA,GAAMW,CAAAA,aAAa,CAAGb,MAAM,CAACc,MAAP,CAAc,SAACC,IAAD,QAAUA,CAAAA,IAAI,CAACN,WAAL,GAAmBO,KAAnB,CAAyBL,EAAzB,CAAV,EAAd,CAAtB,CACA,GAAIM,CAAAA,aAAa,CAAGJ,aAAa,CAACZ,GAAd,CAAkB,SAACR,KAAD,CAAW,CAC/C,MAAOf,CAAAA,KAAK,CAACoC,MAAN,CAAa,SAACC,IAAD,QAAUA,CAAAA,IAAI,CAACtB,KAAL,GAAeA,KAAzB,EAAb,CAAP,CACD,CAFmB,CAApB,CAGAwB,aAAa,CAAG,GAAGC,MAAH,CAAUC,KAAV,CAAgB,EAAhB,CAAoBF,aAApB,CAAhB,CAEA,GAAMhC,CAAAA,YAAY,CAAGgC,aAAa,CAAChB,GAAd,CAAkB,SAACtB,IAAD,CAAU,CAC/C,MAAO,CACLI,IAAI,CAAEJ,IAAI,CAACc,KADN,CAELT,IAAI,iBAAWL,IAAI,CAACS,EAAhB,CAFC,CAGLO,aAAa,CAAEhB,IAAI,CAACgB,aAHf,CAILyB,IAAI,CAAE,QAJD,CAAP,CAMD,CAPoB,CAArB,CASA,MAAKvB,QAAL,CAAc,CAAEZ,YAAY,CAAZA,YAAF,CAAd,EACA,MAAKY,QAAL,CAAc,CAAEjB,KAAK,CAAE,EAAT,CAAd,EACA,MAAKyC,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,aAAxB,EACD,C,OAEDC,gB,CAAmB,SAACzB,UAAD,CAAgB,CACjC,MAAKF,QAAL,CAAc,CAAEE,UAAU,CAAVA,UAAF,CAAd,EACD,C,OAED0B,c,CAAiB,UAAM,CACrB,MAAK5B,QAAL,CAAc,SAAC6B,QAAD,CAAc,CAC1B,MAAO,CAAE7C,YAAY,CAAE,CAAC6C,QAAQ,CAAC7C,YAA1B,CAAP,CACD,CAFD,EAGD,C,OACD8C,c,CAAiB,UAAM,CACrB,MAAK9B,QAAL,CAAc,SAAC6B,QAAD,CAAc,CAC1B,MAAO,CAAE7C,YAAY,CAAE,KAAhB,CAAP,CACD,CAFD,EAGD,C,OAED+C,Y,CAAe,SAACC,CAAD,CAAO,CACpB,GAAMjD,CAAAA,KAAK,CAAGiD,CAAC,CAACC,MAAF,CAASlD,KAAT,CAAe6B,WAAf,EAAd,CACA,MAAKZ,QAAL,CAAc,CAAEjB,KAAK,CAALA,KAAF,CAAd,EACD,C,OAEDmD,U,CAAa,SAACF,CAAD,CAAO,CAClBA,CAAC,CAACG,cAAF,GACAC,OAAO,CAACC,GAAR,CAAY,WAAZ,EACA,GAAI,MAAKzD,KAAL,CAAWG,KAAX,GAAqB,EAAzB,CAA6B,CAC3B,OACD,CACD,MAAKkB,UAAL,GACD,C,+FArFoB,CACnB,GAAMpB,CAAAA,KAAK,CAAGJ,QAAQ,CAAC6D,IAAvB,CACA,KAAKtC,QAAL,CAAc,CAAEnB,KAAK,CAALA,KAAF,CAAd,EACD,C,uCAoFQ,iBACPuD,OAAO,CAACC,GAAR,CAAY,KAAKb,KAAL,CAAWe,QAAvB,EACA,mBACE,2BAAK,KAAK,CAAEtE,OAAO,CAACU,IAApB,eACE,oBAAC,IAAD,EAAM,KAAK,CAAEV,OAAO,CAACD,IAArB,eACE,oBAAC,IAAD,EAAM,KAAK,CAAEC,OAAO,CAACC,IAArB,EADF,cAEE,oBAAC,GAAD,EACE,IAAI,CAAE,KAAKU,KAAL,CAAWK,IADnB,CAEE,cAAc,CAAEhB,OAAO,CAACuE,QAF1B,CAGE,SAAS,CAAEvE,OAAO,CAACE,GAHrB,CAIE,YAAY,CAAE,KAAKS,KAAL,CAAWI,YAJ3B,CAKE,cAAc,CAAE,KAAK4C,cALvB,CAME,cAAc,CAAE,KAAKE,cANvB,EAFF,cAUE,oBAAC,MAAD,EACE,KAAK,CAAE7D,OAAO,CAACG,MADjB,CAEE,UAAU,CAAEH,OAAO,CAACwE,WAFtB,CAGE,KAAK,CAAE,KAAK7D,KAAL,CAAWG,KAHpB,CAIE,QAAQ,CAAE,KAAKgD,YAJjB,CAKE,QAAQ,CAAE,KAAKG,UALjB,EAVF,CADF,cAoBE,4CACE,oBAAC,KAAD,EACE,KAAK,KADP,CAEE,IAAI,CAAC,aAFP,CAGE,MAAM,CAAE,qCAAM,oBAAC,eAAD,EAAiB,IAAI,CAAE,MAAI,CAACtD,KAAL,CAAWQ,YAAlC,EAAN,EAHV,EADF,CApBF,CADF,CA8BD,C,kBArIgBrB,S,EAwInB,cAAeM,CAAAA,UAAU,CAACM,IAAD,CAAzB","sourcesContent":["import React, { Component } from \"react\";\nimport Card from \"../../components/common/card\";\nimport Classes from \"./Hero.module.css\";\nimport Logo from \"../../components/common/logo\";\nimport Nav from \"../../components/common/nav\";\nimport Search from \"../../components/common/search\";\nimport { withRouter, Route, Redirect } from \"react-router-dom\";\nimport AsyncCompo from \"../../hoc/asyncCompo\";\nimport cakeData from \"../../data/cake.json\";\n\nconst AsyncIngredient = AsyncCompo(() => {\n  return import(\"../Ingredient/Ingredient\");\n});\n\nclass Hero extends Component {\n  state = {\n    posts: \"\",\n    post: \"\",\n    value: \"\",\n    showDropdown: false,\n    link: [\n      { name: \"Home\", path: \"/\" },\n      { name: \"Posts\", path: \"/cake\" },\n      { name: \"ByIngredient\", path: `/cake` },\n    ],\n    filteredLink: [],\n  };\n\n  componentWillMount() {\n    const posts = cakeData.data;\n    this.setState({ posts });\n  }\n\n  getPost = (category, id) => {\n    const posts = this.state.posts;\n    const postId = id;\n    const cat = category;\n\n    let post = null;\n    const found = posts.find(\n      (post) => post.id === postId && post.category === cat\n    );\n    if (found) {\n      post = {\n        category: found.category,\n        title: found.title,\n        by: found.by,\n        imageLocation: found.imageLocation,\n        content: found.content,\n      };\n    } else {\n      post = this.state.post;\n    }\n\n    this.setState({ post });\n  };\n\n  filterLink = () => {\n    const ingredient = this.state.value;\n    const posts = [...this.state.posts];\n    const titles = posts.map((post) => post.title);\n    const p = Array.from(ingredient).reduce(\n      (a, v, i) => `${a}[^${ingredient.toLowerCase().substr(i)}]*?${v}`,\n      \"\"\n    );\n    const re = RegExp(p);\n    const filteredTitle = titles.filter((item) => item.toLowerCase().match(re));\n    let filteredPosts = filteredTitle.map((title) => {\n      return posts.filter((item) => item.title === title);\n    });\n    filteredPosts = [].concat.apply([], filteredPosts);\n\n    const filteredLink = filteredPosts.map((post) => {\n      return {\n        name: post.title,\n        path: `/cake/${post.id}`,\n        imageLocation: post.imageLocation,\n        type: \"search\",\n      };\n    });\n\n    this.setState({ filteredLink });\n    this.setState({ value: \"\" });\n    this.props.history.push(\"/ingredient\");\n  };\n\n  selectIngredient = (ingredient) => {\n    this.setState({ ingredient });\n  };\n\n  changeDropdown = () => {\n    this.setState((preState) => {\n      return { showDropdown: !preState.showDropdown };\n    });\n  };\n  removeDropdown = () => {\n    this.setState((preState) => {\n      return { showDropdown: false };\n    });\n  };\n\n  searchMethod = (e) => {\n    const value = e.target.value.toLowerCase();\n    this.setState({ value });\n  };\n\n  submitForm = (e) => {\n    e.preventDefault();\n    console.log(\"submitted\");\n    if (this.state.value === \"\") {\n      return;\n    }\n    this.filterLink();\n  };\n\n  render() {\n    console.log(this.props.location);\n    return (\n      <div style={Classes.Hero}>\n        <Card style={Classes.Card}>\n          <Logo style={Classes.Logo} />\n          <Nav\n            link={this.state.link}\n            nav_link_style={Classes.Nav_link}\n            nav_style={Classes.Nav}\n            showDropdown={this.state.showDropdown}\n            changeDropdown={this.changeDropdown}\n            removeDropdown={this.removeDropdown}\n          />\n          <Search\n            style={Classes.Search}\n            inputStyle={Classes.SearchInput}\n            value={this.state.value}\n            onChange={this.searchMethod}\n            onSubmit={this.submitForm}\n          />\n        </Card>\n\n        <div>\n          <Route\n            exact\n            path=\"/ingredient\"\n            render={() => <AsyncIngredient link={this.state.filteredLink} />}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(Hero);\n"]},"metadata":{},"sourceType":"module"}